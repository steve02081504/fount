<!DOCTYPE html>
<html data-theme="dark">

<head>
	<meta charset="UTF-8">
	<meta name="darkreader-lock">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title data-i18n="installer_wait_screen.error.title"></title>
	<meta property="og:image" content="https://repository-images.githubusercontent.com/862251163/0ac90205-ae40-4fc6-af67-1e28d074c76b">
	<meta property="og:title" content="fount!">
	<link rel="icon" type="image/svg+xml" href="https://steve02081504.github.io/fount/imgs/icon.svg">
	<link href="https://cdn.jsdelivr.net/npm/daisyui/themes.css" rel="stylesheet" type="text/css" crossorigin="anonymous" />
	<link href="https://cdn.jsdelivr.net/npm/daisyui/daisyui.css" rel="stylesheet" type="text/css" crossorigin="anonymous" />
	<script src="https://cdn.jsdelivr.net/npm/@unocss/runtime" crossorigin="anonymous"></script>
	<script blocking="render" type="module" src="../../../preload.mjs"></script>
	<link rel="stylesheet" href="../../../base.css" type="text/css">
	<script type="module">
		import { setBaseDir } from '../../../base.mjs'
		import { initTranslations, getAvailableLocales, getLocaleNames, setLocales } from '../../../scripts/i18n.mjs'

		setBaseDir('../../..')
		await initTranslations('installer_wait_screen.error')

		async function populateLanguageSelector() {
			const languageSelector = document.getElementById('language-selector')
			if (!languageSelector) return

			const locales = getAvailableLocales()
			const localeNames = getLocaleNames()

			languageSelector.innerHTML = '' // Clear existing items

			locales.forEach(locale => {
				const li = document.createElement('li')
				const a = document.createElement('a')
				a.textContent = localeNames.get(locale) || locale
				a.addEventListener('click', e => {
					e.preventDefault()
					setLocales([locale])
					// Close dropdown after selection
					if (document.activeElement instanceof HTMLElement)
						document.activeElement.blur()

				})
				li.appendChild(a)
				languageSelector.appendChild(li)
			})
		}

		populateLanguageSelector()
	</script>
</head>

<body class="flex justify-center items-center h-screen">
	<div class="absolute top-0 left-0 p-4 z-50">
		<div class="dropdown dropdown-bottom dropdown-start">
			<button tabindex="0" role="button" class="btn btn-ghost">
				<img src="https://api.iconify.design/heroicons/language.svg" class="w-6 h-6 text-icon" alt="Language Selector" />
			</button>
			<ul tabindex="0" id="language-selector" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52 max-h-60 overflow-y-auto">
				<!-- Languages will be populated here -->
			</ul>
		</div>
	</div>
	<div role="alert" class="alert alert-error max-w-md">
		<img src="https://api.iconify.design/line-md/alert.svg" class="flex-shrink-0 w-6 h-6" />
		<div>
			<h3 class="font-bold" data-i18n="installer_wait_screen.error.connection_failed"></h3>
			<div class="text-xs" data-i18n="installer_wait_screen.error.description1"></div>
			<div class="text-xs" data-i18n="installer_wait_screen.error.description2"></div>
		</div>
		<button class="btn btn-sm btn-primary" onclick="window.close()" data-i18n="installer_wait_screen.error.close_page"></button>
	</div>
</body>

</html>
