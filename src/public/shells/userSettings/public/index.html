<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8" />
	<meta name="darkreader-lock" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta property="og:title" content="The Keeper of Self: Your fount User Settings" />
	<meta property="og:url" content="https://steve02081504.github.io/fount/protocol?url=fount://page/shells/userSettings/" />
	<meta property="og:type" content="website" />
	<meta property="og:description" content="Tend to the details of your fount identity. Manage your profile, safeguard your access, and view connected devices. A quiet sanctum for your account." />
	<meta name="description" content="Tend to the details of your fount identity. Manage your profile, safeguard your access, and view connected devices. A quiet sanctum for your account." />
	<meta property="og:image" content="https://repository-images.githubusercontent.com/862251163/0ac90205-ae40-4fc6-af67-1e28d074c76b" />
	<title data-i18n="userSettings.title"></title>
	<link rel="icon" href="/favicon.ico" />
	<link rel="icon" href="/favicon.svg" type="image/svg+xml" />
	<link rel="manifest" href="/manifest.json" />
	<script blocking="render" type="module" src="/preload.mjs"></script>
	<link href="https://cdn.jsdelivr.net/npm/daisyui/daisyui.css" rel="stylesheet" type="text/css" crossorigin="anonymous" />
	<link href="/base.css" rel="stylesheet" type="text/css" crossorigin="anonymous" />
	<script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4" crossorigin="anonymous"></script>
	<script type="module" src="/base.mjs"></script>
	<link rel="stylesheet" href="./index.css" type="text/css" />
</head>

<body>
	<div class="container mx-auto p-4">
		<header class="mb-8">
			<h1 class="text-3xl font-bold" data-i18n="userSettings.PageTitle"></h1>
		</header>

		<main class="space-y-8">
			<!-- 用户信息 -->
			<section class="card bg-base-200 shadow-xl">
				<div class="card-body">
					<h2 class="card-title" data-i18n="userSettings.userInfo.title"></h2>
					<div class="space-y-2">
						<p><strong data-i18n="userSettings.userInfo.usernameLabel"></strong> <span id="userInfoUsername" class="font-mono"></span></p>
						<p><strong data-i18n="userSettings.userInfo.creationDateLabel"></strong> <span id="userInfoCreationDate"></span></p>
						<p><strong data-i18n="userSettings.userInfo.folderSizeLabel"></strong> <span id="userInfoFolderSize"></span></p>
						<div class="flex items-center flex-wrap">
							<strong data-i18n="userSettings.userInfo.folderPathLabel" class="mr-2"></strong>
							<code id="userInfoFolderPath" class="p-1 bg-base-300 rounded text-sm break-all flex-grow min-w-[200px]"></code>
							<button id="copyFolderPathBtn" class="btn btn-sm btn-ghost ml-2" data-i18n="userSettings.userInfo.copyPathBtn">
								<img src="https://api.iconify.design/material-symbols/content-copy-outline.svg" class="w-4 h-4" data-i18n="userSettings.userInfo.copyPathBtnIcon" />
							</button>
						</div>
					</div>
				</div>
			</section>

			<div class="grid md:grid-cols-2 gap-8">
				<!-- 修改密码 -->
				<section class="card bg-base-200 shadow-xl">
					<div class="card-body">
						<h2 class="card-title" data-i18n="userSettings.changePassword.title"></h2>
						<form id="changePasswordForm" class="space-y-4">
							<div class="form-control">
								<label class="label" for="currentPassword"><span class="label-text" data-i18n="userSettings.changePassword.currentPasswordLabel"></span></label>
								<input type="password" id="currentPassword" name="currentPassword" class="input input-bordered" required autocomplete="current-password" />
							</div>
							<div class="form-control">
								<label class="label" for="newPassword"><span class="label-text" data-i18n="userSettings.changePassword.newPasswordLabel"></span></label>
								<input type="password" id="newPassword" name="newPassword" class="input input-bordered" required autocomplete="new-password" />
							</div>
							<div class="form-control">
								<label class="label" for="confirmNewPassword"><span class="label-text" data-i18n="userSettings.changePassword.confirmNewPasswordLabel"></span></label>
								<input type="password" id="confirmNewPassword" name="confirmNewPassword" class="input input-bordered" required autocomplete="new-password" />
							</div>
							<div class="card-actions justify-end">
								<button type="submit" class="btn btn-primary" data-i18n="userSettings.changePassword.submitButton"></button>
							</div>
						</form>
					</div>
				</section>

				<!-- 重命名用户 -->
				<section class="card bg-base-200 shadow-xl">
					<div class="card-body">
						<h2 class="card-title" data-i18n="userSettings.renameUser.title"></h2>
						<form id="renameUserForm" class="space-y-4">
							<div class="form-control">
								<label class="label" for="newUsernameRename"><span class="label-text" data-i18n="userSettings.renameUser.newUsernameLabel"></span></label>
								<input type="text" id="newUsernameRename" name="newUsernameRename" class="input input-bordered" required />
							</div>
							<div class="card-actions justify-end">
								<button type="submit" class="btn btn-warning" data-i18n="userSettings.renameUser.submitButton"></button>
							</div>
						</form>
					</div>
				</section>
			</div>

			<!-- 用户设备/会话 -->
			<section class="card bg-base-200 shadow-xl">
				<div class="card-body">
					<div class="flex justify-between items-center mb-4">
						<h2 class="card-title" data-i18n="userSettings.userDevices.title"></h2>
						<button id="refreshDevicesBtn" class="btn btn-sm btn-ghost" data-i18n="userSettings.userDevices.refreshButton">
							<img src="https://api.iconify.design/line-md/rotate-270.svg" class="w-5 h-5" data-i18n="userSettings.userDevices.refreshButtonIcon" />
						</button>
					</div>
					<div id="deviceListContainer" class="max-h-96 overflow-y-auto">
						<p id="noDevicesText" class="text-center hidden py-4" data-i18n="userSettings.userDevices.noDevicesFound"></p>
						<ul id="deviceList" class="space-y-3"></ul>
					</div>
				</div>
			</section>

			<!-- API Keys -->
			<section class="card bg-base-200 shadow-xl">
				<div class="card-body">
					<div class="flex justify-between items-center mb-4">
						<h2 class="card-title" data-i18n="userSettings.apiKeys.title"></h2>
						<button id="refreshApiKeysBtn" class="btn btn-sm btn-ghost" data-i18n="userSettings.apiKeys.refreshButton">
							<img src="https://api.iconify.design/line-md/rotate-270.svg" class="w-5 h-5" data-i18n="userSettings.apiKeys.refreshButtonIcon" />
						</button>
					</div>
					<p class="text-sm opacity-80" data-i18n="userSettings.apiKeys.description"></p>

					<form id="createApiKeyForm" class="flex items-center gap-2 pt-4">
						<input type="text" id="newApiKeyDescription" name="newApiKeyDescription" class="input input-bordered input-sm flex-grow" data-i18n="userSettings.apiKeys.input" required />
						<button type="submit" class="btn btn-sm btn-primary" data-i18n="userSettings.apiKeys.createButton"></button>
					</form>

					<div id="apiKeyListContainer" class="max-h-96 overflow-y-auto pt-4">
						<p id="noApiKeysText" class="text-center hidden py-4" data-i18n="userSettings.apiKeys.noKeysFound"></p>
						<ul id="apiKeyList" class="space-y-3"></ul>
					</div>
				</div>
			</section>

			<!-- 登出 -->
			<section class="card bg-base-200 shadow-xl">
				<div class="card-body">
					<h2 class="card-title" data-i18n="userSettings.logout.title"></h2>
					<p data-i18n="userSettings.logout.description"></p>
					<div class="card-actions justify-end">
						<button id="logoutBtn" class="btn btn-accent" data-i18n="userSettings.logout.buttonText"></button>
					</div>
				</div>
			</section>

			<!-- 删除账户 -->
			<section class="card bg-error text-error-content shadow-xl">
				<div class="card-body">
					<h2 class="card-title" data-i18n="userSettings.deleteAccount.title"></h2>
					<p data-i18n="userSettings.deleteAccount.warning"></p>
					<div class="card-actions justify-end">
						<button id="deleteAccountBtn" class="btn btn-outline" data-i18n="userSettings.deleteAccount.submitButton"></button>
					</div>
				</div>
			</section>
		</main>
	</div>

	<!-- 密码确认模态框 -->
	<dialog id="passwordConfirmationModal" class="modal">
		<div class="modal-box">
			<form method="dialog"> <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button></form>
			<h3 class="font-bold text-lg" data-i18n="userSettings.passwordConfirm.title"></h3>
			<p class="py-4" data-i18n="userSettings.passwordConfirm.message"></p>
			<div class="form-control">
				<label class="label" for="confirmationPassword"><span class="label-text" data-i18n="userSettings.passwordConfirm.passwordLabel"></span></label>
				<input type="password" id="confirmationPassword" class="input input-bordered w-full" autocomplete="current-password" />
			</div>
			<div class="modal-action">
				<button id="confirmPasswordBtn" class="btn btn-primary" data-i18n="userSettings.passwordConfirm.confirmButton"></button>
				<button id="cancelPasswordBtn" class="btn" data-i18n="userSettings.passwordConfirm.cancelButton"></button>
			</div>
		</div>
		<form method="dialog" class="modal-backdrop"><button>close</button></form>
	</dialog>

	<!-- 新 API Key 模态框 -->
	<dialog id="newApiKeyModal" class="modal">
		<div class="modal-box">
			<form method="dialog"> <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button></form>
			<h3 class="font-bold text-lg" data-i18n="userSettings.newApiKey.title"></h3>
			<p class="py-4 text-warning" data-i18n="userSettings.newApiKey.warning"></p>
			<div class="form-control">
				<div class="relative">
					<input type="text" id="newApiKeyInput" class="input input-bordered w-full pr-10" readonly />
					<button id="copyNewApiKeyBtn" class="btn btn-sm btn-ghost absolute top-1/2 right-1 transform -translate-y-1/2" data-i18n="userSettings.newApiKey.copyButton">
						<img src="https://api.iconify.design/material-symbols/content-copy-outline.svg" class="w-4 h-4" />
					</button>
				</div>
			</div>
			<div class="modal-action">
				<form method="dialog"><button class="btn" data-i18n="userSettings.newApiKey.closeButton"></button></form>
			</div>
		</div>
		<form method="dialog" class="modal-backdrop"><button>close</button></form>
	</dialog>

	<script type="module" src="./index.mjs"></script>
</body>

</html>
